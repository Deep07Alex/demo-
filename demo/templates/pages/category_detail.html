{% extends "base.html" %}
{% load static %}

{% block title %}{{ category_name }} - Family BookStore{% endblock %}

{% block content %}
<section class="book-category-page">
  <h2 class="section-title">{{ category_name }}</h2>
  
  <div class="book-grid">
    {% for book in books %}
    <a href="{% url 'book_detail' book.slug %}" class="book-card-link">
      <div class="book-card">
        <img src="{{ book.image.url }}" alt="{{ book.title }}" />
        {% if book.on_sale %}<span class="sale-tag">Sale</span>{% endif %}
        <h3 class="book-title">{{ book.title }}</h3>
        {% if book.old_price %}
        <p class="price"><span class="old">Rs. {{ book.old_price }}</span> Rs. {{ book.price }}</p>
        {% else %}
        <p class="price">Rs. {{ book.price }}</p>
        {% endif %}
        <button class="cart-btn">Add to cart</button>
      </div>
    </a>
    {% empty %}
    <p style="text-align: center; grid-column: 1/-1;">No books available in this category.</p>
    {% endfor %}
  </div>
</section>
{% endblock %}